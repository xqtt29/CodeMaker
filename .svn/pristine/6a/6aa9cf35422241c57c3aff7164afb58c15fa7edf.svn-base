package ${path}.${foldName};

import com.gwall.core.Gmanage;

public class ${ClassName}MB extends Gmanage{

	private static final String MODULE = "${ClassNameUpper}";
	private String sk_id;
	private String sk_na;
	private ${ClassName}Dao ${foldName}Dao;
	public ${ClassName}MB() {
		// 注册模块,同时完成权限初始化
		this.regModule(${ClassName}MB.MODULE);
		${foldName}Dao=new ${ClassName}Dao();
	}
	private ${ClassName}Bean bean = new ${ClassName}Bean();

	public void getSimpleBean() {
		this.bean = ( ${ClassName}Bean) ${foldName}Dao.Query(selid);
	}

	/**
	 * 列表页面查询
	 */
	public void search() {
		searchSQL = "";
		if (!"".equals(this.sk_id)&&this.sk_id!=null) {
			searchSQL += " AND a.csid like '" + this.sk_id.trim()
					+ "'";
		}
		if (!"".equals(this.sk_id)&&this.sk_id!=null) {
			searchSQL += " AND a.csna like '" + this.sk_na.trim()
					+ "'";
		}
	}
	/**
	 * 新增/修改站点信息
	 */
	public void save() {
		if (this.updateflag.toUpperCase().equals("ADD")) {
			if (! ${foldName}Dao.Exists(this.bean)) {
				if ( ${foldName}Dao.Insert(this.bean)) {
					msg = "添加成功!";
				} else {

					msg = "添加失败!";
				}
			} else {
				msg = "编码: " + this.bean.getId() + "已存在!";
			}
		} else {
			if ( ${foldName}Dao.Update(this.bean)) {
				msg = "修改成功!";
			} else {
				msg = "修改失败!";
			}
		}
	}
	/**
	 * 删除
	 */
	public void delete() {
		if (sellist.trim().length() == 0) {
			msg = "请选择将要删除的数据!";
			return;
		}
		String[] lists = sellist.split(",");

		int iDel = 0;
		// 逐条删除
		for (int i = 0; i < lists.length; i++) {
			if ( ${foldName}Dao.Delete(lists[i])) {
				iDel = iDel + 1;
			}
		}
		if (lists.length == iDel) {
			msg = "删除成功";
		} else {
			msg = "删除失败";
		}
	}
	public ${ClassName}Bean getBean() {
		return bean;
	}
	public void setBean(${ClassName}Bean bean) {
		this.bean = bean;
	}
	public String getSk_id() {
		return sk_id;
	}

	public void setSk_id(String sk_id) {
		this.sk_id = sk_id;
	}

	public String getSk_na() {
		return sk_na;
	}

	public void setSk_na(String sk_na) {
		this.sk_na = sk_na;
	}
}
