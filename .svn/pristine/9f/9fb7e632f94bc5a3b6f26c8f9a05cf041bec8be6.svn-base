<%@ page language="java" pageEncoding="UTF-8"%>
<%@page import="javax.faces.context.FacesContext"%>
<%@page import="javax.faces.el.ValueBinding"%>
<%@page import="${path}.${foldName}.${ClassName}MB"%><%@ include file="../../../../include/include_imp.jsp" %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
	<title>${modunote}明细</title>
	<meta http-equiv="pragma" content="no-cache">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">    
	<meta http-equiv="keywords" content="gwall">
	<meta http-equiv="description" content="This is my page">
	<script type="text/javascript" src="<%=request.getContextPath() %>/js/Gwalltag.js"></script>
	<script type="text/javascript" src="<%=request.getContextPath() %>/js/DatePicker/WdatePicker.js"></script>
	<script type="text/javascript" src="${foldName}.js"></script>

</head>
<body>
	<f:view>
	<h:form id="edit">
		<div id="mmain_opt">
			<a4j:commandButton id="addDBut" value="添加明細"
				onclick="if(!addDetail(gtable)){return false};"
				onmouseover="this.className='a4j_over1'"
				onmouseout="this.className='a4j_buton1'" styleClass="a4j_but1"
				type="button" action="${r"#{"}${foldName}MB.addDetail${r"}"}" 
				oncomplete="endAddDetail();"
				reRender="renderArea,output" rendered="${r"#{"}${foldName}MB.MOD && ${foldName}MB.commitStatus${r"}"}"
				 requestDelay="50" />
		</div>
		<div id=mmain_free>
			<a4j:outputPanel id="output">
				<g:GTable gid="gtable" gtype="grid" gversion="2"
						gselectsql="select <#list xtable.columns as c><#if c_has_next>a.${c.columnName},<#else>a.${c.columnName}</#if></#list> from ${xtable.tableName} a where a.did NOT IN (SELECT a.did FROM ${xtable.tableName} a JOIN ${dtable.tableName} b ON (a.biid=b.soco and a.roid=b.srid) WHERE b.biid = '${r"#{"}${foldName}MB.mbean.biid${r"}"}') "
					gwidth="550" gpage="(pagesize = -1)" gdebug="false"
					gcolumn="gcid = 1(headtext = selall,name = pk,width = 30,align = center,type = checkbox,headtype = checkbox);
							gcid = 0(headtext = 行号,name = rowid,width = 31,align = center,type = text,headtype = text,datatype = string);
							<#list xtable.columns as c>
							<#if (c_index>0)>
							gcid = ${c.columnName}(headtext = ${c.columnNote},name = ${c.columnName},width = 80,align = left,type = text,headtype = sort,datatype = string);
							</#if>
							</#list>
						" />
			</a4j:outputPanel>
		</div>
		<div style="display: none;">
			<a4j:outputPanel id="renderArea">
				<h:inputHidden id="msg" value="${r"#{"}${foldName}MB.msg${r"}"}" />
				<h:inputHidden id="sellist" value="${r"#{"}${foldName}MB.sellist${r"}"}" />
				
			</a4j:outputPanel>
		</div>
	</h:form>
	</f:view>
</body>
</html>